<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coach Max – Onboarding</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
  <style>
    .fredoka {
      font-family: 'Fredoka', sans-serif;
    }
    .avatar-option {
      transition: transform 0.2s;
    }
    .avatar-option:hover {
      transform: scale(1.05);
    }
    .avatar-selected {
      border: 4px solid #6366f1;
      box-shadow: 0 0 10px #6366f1;
    }
  </style>
</head>
<body class="min-h-screen bg-cyan-100 text-gray-800 flex flex-col items-center justify-center p-4 fredoka">

  <h1 class="text-4xl font-bold text-center mb-2">Let’s get started!</h1>
  <p class="text-lg text-center mb-6">Choose your coach and tell us your name</p>

  <!-- Avatar Auswahl -->
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8">
    <div class="flex flex-col items-center">
      <div class="w-24 h-24 rounded-full shadow-md overflow-hidden cursor-pointer avatar-option" onclick="playAvatarVideo('benny'); selectAvatar('Benny', this, 'images/benny-bark.png')">
        <img id="bennyImage" src="images/benny-bark.png" alt="Benny" class="w-full h-full object-cover" />
        <video id="bennyVideo" class="hidden w-full h-full object-cover" src="videos/benny.mp4" playsinline></video>
      </div>
    </div>
    <div class="flex flex-col items-center">
      <div class="w-24 h-24 rounded-full shadow-md overflow-hidden cursor-pointer avatar-option" onclick="playAvatarVideo('luna'); selectAvatar('Luna', this, 'images/luna.png')">
        <img id="lunaImage" src="images/luna.png" alt="Luna" class="w-full h-full object-cover" />
        <video id="lunaVideo" class="hidden w-full h-full object-cover" src="videos/luna.mp4" playsinline></video>
      </div>
    </div>
    <div class="flex flex-col items-center">
      <div class="w-24 h-24 rounded-full shadow-md overflow-hidden cursor-pointer avatar-option" onclick="playAvatarVideo('momo'); selectAvatar('Momo', this, 'images/momo.png')">
        <img id="momoImage" src="images/momo.png" alt="Momo" class="w-full h-full object-cover" />
        <video id="momoVideo" class="hidden w-full h-full object-cover" src="videos/momo.mp4" playsinline></video>
      </div>
    </div>
    <div class="flex flex-col items-center">
      <div class="w-24 h-24 rounded-full shadow-md overflow-hidden cursor-pointer avatar-option" onclick="playAvatarVideo('foxy'); selectAvatar('Foxy', this, 'images/foxy.png')">
        <img id="foxyImage" src="images/foxy.png" alt="Foxy" class="w-full h-full object-cover" />
        <video id="foxyVideo" class="hidden w-full h-full object-cover" src="videos/foxy.mp4" playsinline></video>
      </div>
    </div>
  </div>

  <!-- Namenseingabe -->
  <div class="w-full max-w-xs mb-6">
    <label for="username" class="block text-lg mb-2">What's your name?</label>
    <input type="text" id="username" class="w-full px-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-400 fredoka text-center text-lg" placeholder="Type your name..." oninput="validateInput()">
  </div>

  <!-- Button -->
  <button id="startBtn" onclick="startJourney()" disabled class="px-6 py-3 bg-indigo-400 text-white font-semibold rounded-full shadow disabled:opacity-40 hover:bg-indigo-600 transition">
    Let's Go!
  </button>

  <script>
    let selectedAvatar = null;
    let selectedImagePath = null;

    function selectAvatar(name, element, imagePath) {
      document.querySelectorAll('.avatar-option').forEach(el => el.classList.remove('avatar-selected'));
      element.classList.add('avatar-selected');
      selectedAvatar = name;
      selectedImagePath = imagePath;
      validateInput();
    }

    function validateInput() {
      const name = document.getElementById('username').value.trim();
      const btn = document.getElementById('startBtn');
      btn.disabled = !(name.length >= 2 && selectedAvatar);
    }

    function startJourney() {
      const name = document.getElementById('username').value.trim();
      if (name.length >= 2 && selectedAvatar) {
        localStorage.setItem('coachUserName', name);
        localStorage.setItem('coachAvatar', selectedAvatar);
        localStorage.setItem('coachAvatarImage', selectedImagePath);
        window.location.href = 'index.html';
      }
    }

    function playAvatarVideo(id) {
      const img = document.getElementById(id + 'Image');
      const video = document.getElementById(id + 'Video');
      img.classList.add('hidden');
      video.classList.remove('hidden');
      video.play();
      video.onended = () => {
        video.classList.add('hidden');
        img.classList.remove('hidden');
      };
    }
  </script>

</body>
</html>
